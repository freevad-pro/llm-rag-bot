# –ò—Ç–µ—Ä–∞—Ü–∏—è 5 (MVP-5) - –°–±–æ—Ä –ª–∏–¥–æ–≤: –ó–ê–í–ï–†–®–ï–ù–ê ‚úÖ

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 13 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –õ–∏–¥—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î

---

## üéØ –¶–µ–ª—å –∏—Ç–µ—Ä–∞—Ü–∏–∏
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ª–∏–¥–æ–≤ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –°–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–¥–∞–º–∏ ‚úÖ
**–§–∞–π–ª—ã:**
- `src/domain/entities/lead.py` - –ë–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç—å –ª–∏–¥–∞
- `src/application/telegram/services/lead_service.py` - –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–¥–∞–º–∏

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- –°–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π (–∏–º—è + –∫–æ–Ω—Ç–∞–∫—Ç)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–æ–≤ –¥–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–∏—Å–∫ –Ω–µ–¥–∞–≤–Ω–∏—Ö –ª–∏–¥–æ–≤ –∏ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### 2. –°–æ–∑–¥–∞–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Å–±–æ—Ä–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ ‚úÖ
**–§–∞–π–ª—ã:**
- `src/application/telegram/handlers/lead_handlers.py` - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–æ—Ä–º
- `src/application/telegram/states/lead_states.py` - FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `src/application/telegram/keyboards/lead_keyboards.py` - –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- FSM –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–≥–æ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- –î–≤–∞ —Ä–µ–∂–∏–º–∞: –±—ã—Å—Ç—Ä—ã–π –∫–æ–Ω—Ç–∞–∫—Ç –∏ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∑–∞—è–≤–∫–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤/email –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –≤–≤–æ–¥–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

### 3. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ–æ—Ä–º—ã —Å–±–æ—Ä–∞ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚úÖ
**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ —á–µ—Ä–µ–∑ regex (–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)
- –í–∞–ª–∏–¥–∞—Ü–∏—è email —á–µ—Ä–µ–∑ EmailStr
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Telegram username –∫–∞–∫ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è (–∫–æ–º–ø–∞–Ω–∏—è, –≤–æ–ø—Ä–æ—Å)

### 4. –î–æ–±–∞–≤–ª–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–æ–≤ ‚úÖ
**–§–∞–π–ª—ã:**
- `src/infrastructure/tasks/inactive_users_monitor.py` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
- –°–æ–∑–¥–∞–Ω–∏–µ –ª–∏–¥–æ–≤ –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ > 30 –º–∏–Ω—É—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 5. –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º ‚úÖ
**–§–∞–π–ª—ã:**
- `src/infrastructure/notifications/telegram_notifier.py` - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –ª–∏–¥–∞—Ö
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º

### 6. –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚úÖ
**–û–±–Ω–æ–≤–ª–µ–Ω–∏—è:**
- –ö–Ω–æ–ø–∫–∞ "–°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º" –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
- Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- –§–æ—Ä–º—ã —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ª–∏–¥–æ–≤ ‚úÖ
```
‚úÖ –í–∞–ª–∏–¥–Ω—ã–π –ª–∏–¥ —Å–æ–∑–¥–∞–Ω
   –ò–º—è: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤  
   –¢–µ–ª–µ—Ñ–æ–Ω: +79001234567
   Email: ivan@test.com
   –ï—Å—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç: True

‚úÖ –õ–∏–¥ —Å Telegram —Å–æ–∑–¥–∞–Ω: @testuser
   –ï—Å—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç: True

‚úÖ –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω –æ—Ç–∫–ª–æ–Ω–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
‚úÖ Domain entity —Å–æ–∑–¥–∞–Ω: –¢–µ—Å—Ç Entity
```

### –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö ‚úÖ
```
‚úÖ –õ–∏–¥ —Å–æ–∑–¥–∞–Ω –≤ –ë–î: ID=1
   –ò–º—è: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤
   –¢–µ–ª–µ—Ñ–æ–Ω: +79001234567
   Email: ivan@test.com
   –°—Ç–∞—Ç—É—Å: pending_sync
   –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω: False
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚úÖ
```
INFO: Uvicorn running on http://0.0.0.0:8000
‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—å –±–µ–∑ –æ—à–∏–±–æ–∫
```

## üìã –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

### ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
- [x] –õ–∏–¥—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ PostgreSQL
- [x] –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤/email —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- [x] –§–æ—Ä–º—ã —Å–±–æ—Ä–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É—é—Ç
- [x] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

### ‚úÖ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏
- [x] –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç @vision.md
- [x] –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ Telegram –±–æ—Ç–∞
- [x] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
```
src/
‚îú‚îÄ‚îÄ domain/entities/lead.py              # –ë–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç—å
‚îú‚îÄ‚îÄ application/telegram/
‚îÇ   ‚îú‚îÄ‚îÄ handlers/lead_handlers.py        # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ñ–æ—Ä–º  
‚îÇ   ‚îú‚îÄ‚îÄ services/lead_service.py         # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–¥–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ states/lead_states.py           # FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ keyboards/lead_keyboards.py      # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã
‚îî‚îÄ‚îÄ infrastructure/
    ‚îú‚îÄ‚îÄ notifications/telegram_notifier.py # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    ‚îî‚îÄ‚îÄ tasks/inactive_users_monitor.py    # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```

### –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- **Domain-Driven Design**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ domain —Å–ª–æ–µ
- **FSM**: –ü–æ—à–∞–≥–æ–≤—ã–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **Factory Pattern**: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- **Repository Pattern**: –°–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `src/application/telegram/bot.py` - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- `src/application/telegram/handlers/basic_handlers.py` - –ö–Ω–æ–ø–∫–∞ —Å–≤—è–∑–∏ —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
- `pyproject.toml` - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ email –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `src/config/database.py` - –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä —Å–µ—Å—Å–∏–π

### –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```env
MANAGER_TELEGRAM_CHAT_ID=-100xxx    # –ì—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤  
ADMIN_TELEGRAM_IDS=123456,789012    # ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
```

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ (–ò—Ç–µ—Ä–∞—Ü–∏—è 6)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Zoho CRM API v3
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ª–∏–¥–æ–≤ —Å retry –ª–æ–≥–∏–∫–æ–π  
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ Search API
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ª–∏–¥–æ–≤

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û  
**–ö—Ä–∏—Ç–µ—Ä–∏–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω:** –õ–∏–¥—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production:** –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≥–æ—Ç–æ–≤–∞, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM
