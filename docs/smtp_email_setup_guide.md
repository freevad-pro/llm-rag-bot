# üìß –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ SMTP –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ AI RAG Bot —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SMTP –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ - –µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞, —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å email –≤ –∫–æ–Ω—Å–æ–ª—å.

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SMTP

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:

```env
# Application URL (–¥–ª—è —Å—Å—ã–ª–æ–∫ –≤ email)
BASE_URL=https://your-domain.com

# SMTP Settings (–¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
SMTP_HOST=smtp.gmail.com
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** `MANAGER_EMAILS` - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–ª–µ—Ä—Ç—ã –æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ AI —Ä–∞—Å—Ö–æ–¥–æ–≤). –î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è email –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.

### 1.1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ BASE_URL

–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `BASE_URL` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ–º–µ–Ω –¥–ª—è —Å—Å—ã–ª–æ–∫ –≤ email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö:

- **Development:** `BASE_URL=http://127.0.0.1:8000`
- **Production:** `BASE_URL=https://your-domain.com`
- **–° –ø–æ–¥–¥–æ–º–µ–Ω–æ–º:** `BASE_URL=https://admin.your-domain.com`

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

### 2. –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ SMTP –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

#### Gmail
```env
SMTP_HOST=smtp.gmail.com
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password  # –ù–µ –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–æ–ª—å, –∞ App Password
```

**–í–∞–∂–Ω–æ –¥–ª—è Gmail:**
- –í–∫–ª—é—á–∏—Ç–µ 2FA –≤ Google –∞–∫–∫–∞—É–Ω—Ç–µ
- –°–æ–∑–¥–∞–π—Ç–µ App Password: Google Account ‚Üí Security ‚Üí App passwords
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ App Password, –∞ –Ω–µ –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–æ–ª—å

#### Yandex Mail
```env
SMTP_HOST=smtp.yandex.ru
SMTP_USER=your-email@yandex.ru
SMTP_PASSWORD=your-password
```

#### Mail.ru
```env
SMTP_HOST=smtp.mail.ru
SMTP_USER=your-email@mail.ru
SMTP_PASSWORD=your-password
```

#### –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–æ—á—Ç–∞
```env
SMTP_HOST=mail.company.com
SMTP_USER=admin@company.com
SMTP_PASSWORD=your-password
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMTP –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `http://your-domain/admin/login`
2. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?"
3. –í–≤–µ–¥–∏—Ç–µ email –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–∏—Å—å–º–∞

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ï—Å–ª–∏ email –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
   ```bash
   docker-compose logs app
   ```

2. **–ò—â–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è:**
   - `[EMAIL SIMULATION]` - SMTP –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
   - `Email —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω` - –ø–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ
   - `–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ email` - –ø—Ä–æ–±–ª–µ–º–∞ —Å SMTP

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   docker-compose exec app env | grep SMTP
   ```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:

- **"Authentication failed"** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏–ª–∏ App Password
- **"Connection refused"** - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π SMTP_HOST –∏–ª–∏ –ø–æ—Ä—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- **"SSL/TLS error"** - –ø—Ä–æ–±–ª–µ–º–∞ —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ App Passwords** –¥–ª—è Gmail –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω—ã—Ö –ø–∞—Ä–æ–ª–µ–π
2. **–ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª–∏** –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –≤ git
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –¥–ª—è –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –º–µ–Ω—è–π—Ç–µ –ø–∞—Ä–æ–ª–∏** SMTP –∞–∫–∫–∞—É–Ω—Ç–æ–≤

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ:

```bash
# –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker secrets
echo "your-smtp-password" | docker secret create smtp_password -
```

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è** - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å—Å—ã–ª–∫–∏ –Ω–∞ email  
‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è email** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏  
‚úÖ **HTML –ø–∏—Å—å–º–∞** - –∫—Ä–∞—Å–∏–≤–æ–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ  
‚úÖ **Graceful fallback** - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –µ—Å–ª–∏ SMTP –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω  
‚úÖ **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è** - —Å–º–µ–Ω–∞ email —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ email:

- **–¢–µ–º–∞:** "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è - AI RAG Bot"
- **–§–æ—Ä–º–∞—Ç:** HTML + —Ç–µ–∫—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è
- **–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è:** 1 —á–∞—Å
- **–°—Å—ã–ª–∫–∞:** `{BASE_URL}/admin/reset-password?token=...` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É BASE_URL)

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è SMTP –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:

```bash
# Development
docker-compose restart app

# Production
docker-compose -f docker-compose.prod.yml restart app
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π SMTP:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤–∞—à–µ–≥–æ –ø–æ—á—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ—Ä—Ç 587 –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–∏—Å—Ç–µ–º—ã

---

*–°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –±–µ–∑ SMTP - –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ email –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.*
