# üöÄ –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

**–î–∞—Ç–∞:** 2025-10-18  
**–ó–∞–¥–∞—á–∞:** –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ

---

## ‚úÖ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@–≤–∞—à-—Å–µ—Ä–≤–µ—Ä.ru
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
cd /opt/llm-bot
./scripts/update.sh
```

**–ì–æ—Ç–æ–≤–æ!** –°–∫—Ä–∏–ø—Ç —Å–¥–µ–ª–∞–µ—Ç –≤—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–∑–¥–∞—Å—Ç backup
- –û–±–Ω–æ–≤–∏—Ç –∫–æ–¥
- –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- –ü–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç Docker –æ–±—Ä–∞–∑—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç
docker-compose -f /opt/llm-bot/app/docker-compose.prod.yml ps

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker-compose -f /opt/llm-bot/app/docker-compose.prod.yml exec app python -m alembic current

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: [—Ç–µ–∫—É—â–∞—è_–≤–µ—Ä—Å–∏—è] (head)
```

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É `/start` –≤ Telegram - –æ–Ω –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å.

---

## üìù –ß—Ç–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–æ

- ‚úÖ **–ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - –≤—Å–µ —Ñ–∞–π–ª—ã Python
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –≤—Å–µ –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ **Docker –æ–±—Ä–∞–∑—ã** - –ø–µ—Ä–µ—Å–æ–±–µ—Ä—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- ‚ùå **`.env` —Ñ–∞–π–ª –ù–ï –¢–†–û–ì–ê–ï–¢–°–Ø** - –≤—Å–µ –≤–∞—à–∏ –∫–ª—é—á–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å—Ç–∞–Ω—É—Ç—Å—è

---

## ‚ö†Ô∏è –ü—Ä–æ .env —Ñ–∞–π–ª

–í–∞—à `.env` —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–≤ `/opt/llm-bot/config/.env`) **–Ω–µ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω**.

**–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, AI Cost Control):

```bash
nano /opt/llm-bot/config/.env

# –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞:
MONTHLY_TOKEN_LIMIT=500000
MONTHLY_COST_LIMIT_USD=50.00
COST_ALERT_THRESHOLD=0.8
AUTO_DISABLE_ON_LIMIT=true
COST_ALERT_ENABLED=true
WEEKLY_USAGE_REPORT=true

# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ (Ctrl+X, Y, Enter) –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
cd /opt/llm-bot/app
docker-compose -f docker-compose.prod.yml restart app bot
```

–ù–æ —ç—Ç–æ **–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ** - –±–æ—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ –±–µ–∑ —ç—Ç–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.

---

## üÜò –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç

–°–∫—Ä–∏–ø—Ç `update.sh` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–∞—Ç–∏—Ç—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö.

### –†—É—á–Ω–æ–π –æ—Ç–∫–∞—Ç

```bash
cd /opt/llm-bot/app
git log --oneline -5  # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é
git reset --hard HASH_–ü–†–ï–î–´–î–£–©–ï–ì–û_–ö–û–ú–ú–ò–¢–ê
docker-compose -f docker-compose.prod.yml restart app bot
```

### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ backup'–æ–≤
ls -la /opt/llm-bot/backups/

# –ü–æ—Å–ª–µ–¥–Ω–∏–π backup —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `update.sh` –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```
=== –†–ï–ó–£–õ–¨–¢–ê–¢ –û–ë–ù–û–í–õ–ï–ù–ò–Ø ===
üìù –ü—Ä–µ–¥—ã–¥—É—â–∞—è –≤–µ—Ä—Å–∏—è: abc1234
üìù –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è: def5678
üèóÔ∏è –û–±—Ä–∞–∑ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω: –î–∞
‚è±Ô∏è  –í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 2025-10-18 15:30:00

=== –ò–ó–ú–ï–ù–ï–ù–ò–Ø ===
[—Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ Git]

üéâ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!
```

---

## üîç –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω—ã –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –∏–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
- **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** `docs/vps_update_guide.md`
- **–ü–µ—Ä–≤–∏—á–Ω—ã–π –¥–µ–ø–ª–æ–π:** `docs/server_deployment_guide.md`
- **Production –∫–æ–º–∞–Ω–¥—ã:** `docs/production_commands.md`

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~3-5 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ü—Ä–æ—Å—Ç–∞—è (–æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞)  
**–†–∏—Å–∫–∏:** –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö)

