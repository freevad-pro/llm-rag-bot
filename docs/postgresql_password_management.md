# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–º PostgreSQL –≤ –ò–ò-–±–æ—Ç–µ

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 13 —Å–µ–Ω—Ç—è–±—Ä—è 2025  
**–¶–µ–ª—å:** –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–æ–ª–µ–π PostgreSQL –¥–ª—è development –∏ production  
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** Production –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 3 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (app, bot, postgres)

---

## üîç –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

### Development –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
- **–ü–∞—Ä–æ–ª—å:** `password` (—Å–ª–∞–±—ã–π, —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- **–ì–¥–µ –∑–∞–¥–∞–Ω:** –í `docker-compose.yml` –∏ `env.example`
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** ‚ùå –ù–ï –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è production

### Production –æ–∫—Ä—É–∂–µ–Ω–∏–µ:
- **–ü–∞—Ä–æ–ª—å:** –ó–∞–¥–∞–µ—Ç—Å—è –≤ `/opt/llm-bot/config/.env`
- **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –í `docker-compose.prod.yml` —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `${POSTGRES_PASSWORD}`
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

---

## üìã –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ø–∞—Ä–æ–ª–∏

### 1. **Development (docker-compose.yml):**
```yaml
# –°—Ç—Ä–æ–∫–∞ 25 –≤ docker-compose.yml
POSTGRES_PASSWORD: password

# –°—Ç—Ä–æ–∫–∞ 9 –≤ docker-compose.yml  
DATABASE_URL=postgresql+asyncpg://postgres:password@postgres:5432/catalog_db
```

### 2. **Development –ø—Ä–∏–º–µ—Ä (env.example):**
```env
# –°—Ç—Ä–æ–∫–∞ 2 –≤ env.example
DATABASE_URL=postgresql+asyncpg://postgres:password@postgres:5432/catalog_db
```

### 3. **Production (docker-compose.prod.yml):**
```yaml
# –°—Ç—Ä–æ–∫–∞ 44 –≤ docker-compose.prod.yml
POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}  # –ë–µ—Ä–µ—Ç—Å—è –∏–∑ .env —Ñ–∞–π–ª–∞
```

### 4. **Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (env.production):**
```env
# –í env.production (–∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
POSTGRES_PASSWORD=–ó–ê–ú–ï–ù–ò–¢–ï_–ù–ê_–°–ò–õ–¨–ù–´–ô_–ü–ê–†–û–õ–¨
DATABASE_URL=postgresql+asyncpg://postgres:–ó–ê–ú–ï–ù–ò–¢–ï_–ù–ê_–°–ò–õ–¨–ù–´–ô_–ü–ê–†–û–õ–¨@postgres:5432/catalog_db
```

---

## üîß –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤ production

### –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–ª—å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
```bash
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –ø–∞—Ä–æ–ª—å (32 —Å–∏–º–≤–æ–ª–∞)
openssl rand -base64 32

# –ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É (–µ—Å–ª–∏ openssl –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
head /dev/urandom | tr -dc A-Za-z0-9 | head -c 32 ; echo ''

# –ü—Ä–∏–º–µ—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è:
# K8mN2pQwE4rT6yU9iO1aS3dF5gH7jK0l
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª—è –≤ .env —Ñ–∞–π–ª–µ
```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
nano /opt/llm-bot/config/.env

# –ó–∞–º–µ–Ω—è–µ–º —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏:
POSTGRES_PASSWORD=K8mN2pQwE4rT6yU9iO1aS3dF5gH7jK0l
DATABASE_URL=postgresql+asyncpg://postgres:K8mN2pQwE4rT6yU9iO1aS3dF5gH7jK0l@postgres:5432/catalog_db
```

### –®–∞–≥ 3: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```bash
cd /opt/llm-bot/app

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º
docker-compose -f docker-compose.prod.yml down
docker-compose -f docker-compose.prod.yml up -d
```

---

## üîÑ –ö–∞–∫ —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤ —Ä–∞–±–æ—Ç–∞—é—â–µ–π —Å–∏—Å—Ç–µ–º–µ

### ‚ö†Ô∏è –í–ê–ñ–ù–û: Backup –ø–µ—Ä–µ–¥ —Å–º–µ–Ω–æ–π –ø–∞—Ä–æ–ª—è!
```bash
# –°–æ–∑–¥–∞–µ–º backup –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –ø–∞—Ä–æ–ª—è
/opt/llm-bot/scripts/backup.sh
```

### –ú–µ—Ç–æ–¥ 1: –ü–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

#### –®–∞–≥ 1: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
```bash
cd /opt/llm-bot/app
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (app, bot, postgres)
docker-compose -f docker-compose.prod.yml down
```

#### –®–∞–≥ 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –≤ .env
```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª
nano /opt/llm-bot/config/.env

# –ú–µ–Ω—è–µ–º –ø–∞—Ä–æ–ª—å –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö:
POSTGRES_PASSWORD=–í–ê–®_–ù–û–í–´–ô_–°–ò–õ–¨–ù–´–ô_–ü–ê–†–û–õ–¨
DATABASE_URL=postgresql+asyncpg://postgres:–í–ê–®_–ù–û–í–´–ô_–°–ò–õ–¨–ù–´–ô_–ü–ê–†–û–õ–¨@postgres:5432/catalog_db
```

#### –®–∞–≥ 3: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ volumes (–î–ê–ù–ù–´–ï –°–û–•–†–ê–ù–Ø–¢–°–Ø)
docker-compose -f docker-compose.prod.yml down -v

# –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º (app, bot, postgres)
docker-compose -f docker-compose.prod.yml up -d
```

### –ú–µ—Ç–æ–¥ 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –≤ —Ä–∞–±–æ—Ç–∞—é—â–µ–π –ë–î

#### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
```bash
# –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É PostgreSQL
docker-compose -f docker-compose.prod.yml exec postgres psql -U postgres -d catalog_db
```

#### –®–∞–≥ 2: –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è –≤ –ë–î
```sql
-- –í –∫–æ–Ω—Å–æ–ª–∏ PostgreSQL –≤—ã–ø–æ–ª–Ω—è–µ–º:
ALTER USER postgres PASSWORD '–í–ê–®_–ù–û–í–´–ô_–°–ò–õ–¨–ù–´–ô_–ü–ê–†–û–õ–¨';

-- –í—ã—Ö–æ–¥–∏–º
\q
```

#### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env —Ñ–∞–π–ª–∞
```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º .env —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º
nano /opt/llm-bot/config/.env

# ‚ö†Ô∏è –í–ê–ñ–ù–û: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –û–ë–ê –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (app –ò bot)
# –û–±–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ë–î –∏ –∫–µ—à–∏—Ä—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
docker-compose -f docker-compose.prod.yml restart app bot
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º

### –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ FastAPI —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
docker-compose -f docker-compose.prod.yml logs app | grep -i "database\|postgres\|connection"

# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ Telegram –±–æ—Ç–∞ –Ω–∞ –æ—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
docker-compose -f docker-compose.prod.yml logs bot | grep -i "database\|postgres\|connection"

# –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ - –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä–æ–ª—å –≤ .env
```

### –ü—Ä—è–º–æ–π —Ç–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```bash
# –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é
docker-compose -f docker-compose.prod.yml exec postgres psql -U postgres -d catalog_db -c "SELECT version();"

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏—é PostgreSQL
```

### –¢–µ—Å—Ç —á–µ—Ä–µ–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º health endpoint
curl http://localhost:8000/health

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å {"status": "healthy"}
```

---

## üîê –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø–∞—Ä–æ–ª—é PostgreSQL

### ‚úÖ –°–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
- **–ú–∏–Ω–∏–º—É–º 16 —Å–∏–º–≤–æ–ª–æ–≤** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 32)
- **–ë—É–∫–≤—ã —Ä–∞–∑–Ω–æ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞** (A-Z, a-z)
- **–¶–∏—Ñ—Ä—ã** (0-9)
- **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã** (–Ω–æ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ —Å URL encoding)

### ‚ùå –ò–∑–±–µ–≥–∞–π—Ç–µ –≤ –ø–∞—Ä–æ–ª–µ:
- **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã URL** (@, /, :, %, ? –∏ —Ç.–¥.)
- **–ü—Ä–æ–±–µ–ª—ã** –∏ **—Ç–∞–±—É–ª—è—Ü–∏–∏**
- **–ö–∞–≤—ã—á–∫–∏** (", ')
- **–°–∏–º–≤–æ–ª—ã bash** ($, `, \, |)

### üí° –ü—Ä–∏–º–µ—Ä—ã —Ö–æ—Ä–æ—à–∏—Ö –ø–∞—Ä–æ–ª–µ–π:
```
K8mN2pQwE4rT6yU9iO1aS3dF5gH7jK0l
Xm4Bn7Rt9Ql2Vw8Zx5Cy3Pf6Ht1Nk4Js
P9rG2nM5qX8wE1tY4uI7oA6sD3fH0kL
```

---

## üö® –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–±—ã—Ç–æ–º –ø–∞—Ä–æ–ª–µ

### –ï—Å–ª–∏ –∑–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å –∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

#### –í–∞—Ä–∏–∞–Ω—Ç 1: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ backup
```bash
# –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ backup
cd /opt/llm-bot
tar -xzf backups/latest.tar.gz

# –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp llm-bot-backup-*/. env config/.env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º
cd app
docker-compose -f docker-compose.prod.yml down
docker-compose -f docker-compose.prod.yml up -d
```

#### –í–∞—Ä–∏–∞–Ω—Ç 2: –°–±—Ä–æ—Å —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ—Ä–≤–∏—Å—ã
docker-compose -f docker-compose.prod.yml down

# –ó–∞–ø—É—Å–∫–∞–µ–º PostgreSQL —Å –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
docker run --rm -v /opt/llm-bot/data/postgres:/var/lib/postgresql/data \
  -e POSTGRES_HOST_AUTH_METHOD=trust \
  -p 5432:5432 \
  postgres:15

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∏ –º–µ–Ω—è–µ–º –ø–∞—Ä–æ–ª—å
docker exec -it <container_id> psql -U postgres -c "ALTER USER postgres PASSWORD '–Ω–æ–≤—ã–π_–ø–∞—Ä–æ–ª—å';"

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –æ–±—ã—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
```

---

## üìä –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª–µ–π –ø–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º

| –û–∫—Ä—É–∂–µ–Ω–∏–µ | –¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-----------|----------------|--------------|--------------|
| **Development** | `password` | ‚ùå –°–ª–∞–±—ã–π | –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) |
| **Production** | –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è | ‚úÖ –°–∏–ª—å–Ω—ã–π | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–ª–æ–∂–Ω—ã–π |
| **Staging** | –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è | ‚úÖ –°–∏–ª—å–Ω—ã–π | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å |

---

## üìù Checklist —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è

### –ü–µ—Ä–µ–¥ —Å–º–µ–Ω–æ–π:
- [ ] –°–æ–∑–¥–∞–Ω backup —Å–∏—Å—Ç–µ–º—ã
- [ ] –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω —Å–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã
- [ ] –ï—Å—Ç—å –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞

### –í–æ –≤—Ä–µ–º—è —Å–º–µ–Ω—ã:
- [ ] –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã (app, bot, postgres)
- [ ] –ò–∑–º–µ–Ω–µ–Ω –ø–∞—Ä–æ–ª—å –≤ .env —Ñ–∞–π–ª–µ (2 –º–µ—Å—Ç–∞)
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (app, bot, postgres)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ app –∏ bot

### –ü–æ—Å–ª–µ —Å–º–µ–Ω—ã:
- [ ] Health check –ø—Ä–æ—Ö–æ–¥–∏—Ç
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Telegram –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç
- [ ] –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ

---

## üí° –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–∞—Ä–æ–ª—è:
```bash
#!/bin/bash
# /opt/llm-bot/scripts/check_db_password.sh

echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
if docker-compose -f /opt/llm-bot/app/docker-compose.prod.yml exec postgres psql -U postgres -d catalog_db -c "SELECT 1;" > /dev/null 2>&1; then
    echo "‚úÖ –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL —Ä–∞–±–æ—Ç–∞–µ—Ç"
else
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä—è–º–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL"
    echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –≤ /opt/llm-bot/config/.env"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ app –∏ bot –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
echo "üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤..."
if docker-compose -f /opt/llm-bot/app/docker-compose.prod.yml ps app bot | grep -q "Up"; then
    echo "‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã app –∏ bot –∑–∞–ø—É—â–µ–Ω—ã"
else
    echo "‚ö†Ô∏è –û–¥–∏–Ω –∏–ª–∏ –æ–±–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (app/bot) –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã"
    echo "–ó–∞–ø—É—Å—Ç–∏—Ç–µ: docker-compose -f docker-compose.prod.yml up -d app bot"
fi
```

### –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∞—Ä–æ–ª—è:
```bash
#!/bin/bash
# /opt/llm-bot/scripts/generate_password.sh

echo "üîê –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å PostgreSQL:"
NEW_PASSWORD=$(openssl rand -base64 32 | tr -d "=+/" | cut -c1-32)
echo "–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å: $NEW_PASSWORD"
echo ""
echo "–î–æ–±–∞–≤—å—Ç–µ –≤ /opt/llm-bot/config/.env:"
echo "POSTGRES_PASSWORD=$NEW_PASSWORD"
echo "DATABASE_URL=postgresql+asyncpg://postgres:$NEW_PASSWORD@postgres:5432/catalog_db"
```

---

**üîê –ü–æ–º–Ω–∏—Ç–µ: –°–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å PostgreSQL - –æ—Å–Ω–æ–≤–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –≤–∞—à–µ–≥–æ –±–æ—Ç–∞!**
